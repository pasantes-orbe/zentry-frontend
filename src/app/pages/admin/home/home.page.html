<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start" class="header-brand">
      <img src="assets/logos/logo-48.png" class="header-logo" alt="Zentry Logo" />
      <span class="header-title-text">Admin</span>
    </ion-buttons>

    <ion-buttons slot="end">
      <ion-item lines="none" class="theme-toggle-item">
        <ion-icon name="moon" slot="start"></ion-icon>
        <ion-toggle
          [checked]="theme.isDark()"
          (ionChange)="onThemeToggle($event)"
          aria-label="Cambiar tema">
        </ion-toggle>
      </ion-item>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large" class="page-title">Countries</ion-title>
    </ion-toolbar>
  </ion-header>

  <!-- Tarjeta principal: Añadir Country -->
  <ion-card class="add-card" (click)="navigateToAddCountry()">
    <ion-card-header>
      <ion-icon name="add-circle-outline"></ion-icon>
      <ion-card-title>Añadir Country</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <p>Crea un nuevo country. Podrás marcar centro y perímetro en el mapa.</p>
      <ion-button fill="clear" expand="block">CREAR</ion-button>
    </ion-card-content>
  </ion-card>

  <!-- Lista de countries existentes -->
  <ng-container *ngIf="!loading && countries.length > 0; else emptyOrLoading">
    <ion-grid>
      <ion-row>
        <ion-col size="12" size-md="6" size-lg="4" *ngFor="let c of countries">
          <ion-card class="country-card" (click)="openCountryDashboard(c)">
            <ion-img [src]="getCountryImage(c)"></ion-img>
            <ion-card-header>
              <ion-card-title>{{ c.name }}</ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <p>Lat: {{ c.latitude }} / Lng: {{ c.longitude }}</p>
              <ion-button fill="clear" expand="block">ADMINISTRAR</ion-button>
            </ion-card-content>
          </ion-card>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ng-container>

  <ng-template #emptyOrLoading>
    <div class="empty">
      <ion-spinner *ngIf="loading"></ion-spinner>
      <p *ngIf="!loading">No hay countries creados todavía.</p>
    </div>
  </ng-template>
</ion-content>
