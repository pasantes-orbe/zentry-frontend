<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Mi Perfil</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="profile-header">
    <ion-avatar>
      <img [src]="'https://placehold.co/128x128/374151/FFFF?text=' + getAvatarInitial()" />
    </ion-avatar>
    <h2 class="profile-name">{{ getOwnerName() }}</h2>
    <p class="profile-info">{{ getPropertyInfo() }}</p>
  </div>
  
  <div class="settings-list-container">
    <ion-list>
      <ion-item 
        lines="none" 
        class="settings-item" 
        button
        (click)="onPersonalInfoClick()">
        <ion-icon slot="start" name="person-outline"></ion-icon>
        <ion-label class="settings-label">Informaci√≥n Personal</ion-label>
      </ion-item>
      
      <ion-item 
        lines="none" 
        class="settings-item" 
        button
        (click)="onMyPropertiesClick()">
        <ion-icon slot="start" name="home-outline"></ion-icon>
        <ion-label class="settings-label">Mis Propiedades</ion-label>
      </ion-item>

      <ion-item 
        lines="none" 
        class="settings-item" 
        button
        (click)="onSecurityClick()">
        <ion-icon slot="start" name="lock-closed-outline"></ion-icon>
        <ion-label class="settings-label">Seguridad y Contrase√±a</ion-label>
      </ion-item>
      
      <ion-item 
        lines="none" 
        class="settings-item logout-item" 
        button 
        (click)="onLogoutClick()">
        <ion-icon slot="start" name="log-out-outline" color="danger"></ion-icon>
        <ion-label class="settings-label" color="danger">Cerrar Sesi√≥n</ion-label>
      </ion-item>
    </ion-list>
  </div>

  <!-- Action Sheet para Informaci√≥n Personal -->
  <ion-action-sheet
    [isOpen]="isActionSheetOpen"
    header="Informaci√≥n Personal"
    [buttons]="actionSheetButtons"
    (didDismiss)="isActionSheetOpen = false">
  </ion-action-sheet>

  <!-- Alert de confirmaci√≥n para Logout -->
  <ion-alert
    [isOpen]="isLogoutAlertOpen"
    header="Cerrar Sesi√≥n"
    message="¬øEst√°s seguro que deseas cerrar tu sesi√≥n?"
    [buttons]="logoutAlertButtons">
  </ion-alert>

  <!-- Modal para Editar Perfil -->
  <ion-modal [isOpen]="isEditProfileModalOpen" (didDismiss)="closeEditProfileModal()">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>Editar Perfil</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="closeEditProfileModal()">
              <ion-icon name="close"></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      
      <ion-content>
        <div style="padding: 20px;">
          <ion-item>
            <ion-input 
              label="Nombre completo"
              labelPlacement="stacked"
              [(ngModel)]="editName"
              placeholder="Ingrese su nombre">
            </ion-input>
          </ion-item>
          
          <ion-item>
            <ion-input 
              label="Email"
              labelPlacement="stacked"
              type="email"
              [(ngModel)]="editEmail"
              placeholder="Ingrese su email">
            </ion-input>
          </ion-item>
          
          <ion-item>
            <ion-input 
              label="Tel√©fono"
              labelPlacement="stacked"
              [(ngModel)]="editPhone"
              placeholder="Ingrese su tel√©fono">
            </ion-input>
          </ion-item>
          
          <ion-button 
            expand="block" 
            (click)="saveProfileChanges()"
            style="margin-top: 20px;">
            Guardar Cambios
          </ion-button>
        </div>
      </ion-content>
    </ng-template>
  </ion-modal>

  <!-- Modal para Mis Propiedades -->
  <ion-modal [isOpen]="isPropertiesModalOpen" (didDismiss)="closePropertiesModal()">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>Mis Propiedades</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="closePropertiesModal()">
              <ion-icon name="close"></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      
      <ion-content>
        <div style="padding: 20px;">
          <ion-list>
            <ion-item *ngFor="let property of properties">
              <div>
                <h4>{{property.type}}</h4>
                <p><strong>Direcci√≥n:</strong> {{property.address}}</p>
                <p><strong>√Årea:</strong> {{property.area}}</p>
                <p><strong>Estado:</strong> 
                  <span [style.color]="property.status === 'Activa' ? 'green' : 'red'">
                    {{property.status}}
                  </span>
                </p>
              </div>
            </ion-item>
          </ion-list>
        </div>
      </ion-content>
    </ng-template>
  </ion-modal>

  <!-- Modal para Seguridad -->
  <ion-modal [isOpen]="isSecurityModalOpen" (didDismiss)="closeSecurityModal()">
    <ng-template>
      <ion-header>
        <ion-toolbar>
          <ion-title>Seguridad y Contrase√±a</ion-title>
          <ion-buttons slot="end">
            <ion-button (click)="closeSecurityModal()">
              <ion-icon name="close"></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-toolbar>
      </ion-header>
      
      <ion-content>
        <div style="padding: 20px;">
          <h4>Cambiar Contrase√±a</h4>
          
          <ion-item>
            <ion-input 
              label="Contrase√±a actual"
              labelPlacement="stacked"
              type="password"
              [(ngModel)]="currentPassword"
              placeholder="Ingrese su contrase√±a actual">
            </ion-input>
          </ion-item>
          
          <ion-item>
            <ion-input 
              label="Nueva contrase√±a"
              labelPlacement="stacked"
              type="password"
              [(ngModel)]="newPassword"
              placeholder="Ingrese la nueva contrase√±a">
            </ion-input>
          </ion-item>
          
          <ion-item>
            <ion-input 
              label="Confirmar contrase√±a"
              labelPlacement="stacked"
              type="password"
              [(ngModel)]="confirmPassword"
              placeholder="Confirme la nueva contrase√±a">
            </ion-input>
          </ion-item>
          
          <ion-button 
            expand="block" 
            (click)="changePassword()"
            style="margin-top: 20px;">
            Cambiar Contrase√±a
          </ion-button>
          
          <div style="margin-top: 30px; padding: 20px; background: #111111; border-radius: 8px;">
            <h5>Opciones de Seguridad Adicionales</h5>
            <p>üõ°Ô∏è <strong>Autenticaci√≥n en 2 Pasos:</strong> Pr√≥ximamente disponible</p>
            <p>üìã <strong>Historial de Accesos:</strong> Revise su actividad reciente</p>
            <p>üîê <strong>Sesiones Activas:</strong> Gestione sus dispositivos conectados</p>
          </div>
        </div>
      </ion-content>
    </ng-template>
  </ion-modal>
</ion-content>